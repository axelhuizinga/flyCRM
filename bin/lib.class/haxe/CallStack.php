<?php
/**
 * Generated by Haxe 4.0.0-preview.4+1e3e5e016
 */

namespace haxe;

use \php\Boot;
use \php\_Boot\HxString;

class CallStack {
	/**
	 * @var \Closure
	 */
	static public $mapPosition;

	/**
	 * @return \Array_hx
	 */
	static public function callStack () {
		#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:33: characters 3-78
		return CallStack::makeStack(debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS));
	}

	/**
	 * @param mixed $native
	 * 
	 * @return \Array_hx
	 */
	static public function makeStack ($native) {
		#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:118: characters 3-19
		$result = new \Array_hx();
		#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:119: characters 3-36
		$count = count($native);
		#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:121: lines 121-150
		$_g1 = 0;
		#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:121: lines 121-150
		$_g = $count;
		#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:121: lines 121-150
		while ($_g1 < $_g) {
			#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:121: lines 121-150
			$_g1 = $_g1 + 1;
			#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:121: characters 8-9
			$i = $_g1 - 1;
			#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:122: characters 4-26
			$entry = $native[$i];
			#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:123: characters 4-20
			$item = null;
			#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:125: lines 125-137
			if (($i + 1) < $count) {
				#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:126: characters 5-30
				$next = $native[$i + 1];
				#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:128: characters 5-62
				if (!isset($next["function"])) {
					#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:128: characters 41-62
					$next["function"] = "";
				}
				#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:129: characters 5-56
				if (!isset($next["class"])) {
					#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:129: characters 38-56
					$next["class"] = "";
				}
				#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:131: lines 131-136
				if (HxString::indexOf($next["function"], "{closure}") >= 0) {
					#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:132: characters 6-28
					$item = StackItem::LocalFunction();
				} else if ((strlen($next["class"]) > 0) && (strlen($next["function"]) > 0)) {
					#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:134: characters 6-49
					$cls = Boot::getClassName($next["class"]);
					#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:135: characters 6-42
					$item = StackItem::Method($cls, $next["function"]);
				}
			}
			#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:138: lines 138-149
			if (isset($entry["file"])) {
				#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:139: lines 139-145
				if (CallStack::$mapPosition !== null) {
					#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:140: characters 6-58
					$pos = (CallStack::$mapPosition)($entry["file"], $entry["line"]);
					#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:141: lines 141-144
					if (($pos !== null) && ($pos->source !== null) && ($pos->originalLine !== null)) {
						#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:142: characters 7-33
						$entry["file"] = $pos->source;
						#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:143: characters 7-39
						$entry["line"] = $pos->originalLine;
					}
				}
				#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:146: characters 5-61
				$result->arr[$result->length] = StackItem::FilePos($item, $entry["file"], $entry["line"]);
				#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:146: characters 5-61
				++$result->length;

			} else if ($item !== null) {
				#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:148: characters 5-22
				$result->arr[$result->length] = $item;
				#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:148: characters 5-22
				++$result->length;
			}
		}

		#C:\HaxeToolkit\haxe\std/php/_std/haxe/CallStack.hx:152: characters 3-16
		return $result;
	}
}

Boot::registerClass(CallStack::class, 'haxe.CallStack');
